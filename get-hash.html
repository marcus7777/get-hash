  <link rel="import" href="../google-map/google-map.html">
  <link rel="import" href="../geohash-js/geohash-js.html">
  <link rel="import" href="../google-map/google-map-search.html">

  <dom-module id="get-hash">

    <template>
      <google-map-search id="googleMapSearch" map="{{map}}" query="{{location}}" result="{{result}}">
      </google-map-search>
    </template>
    
    <script>
      
(function() {
  
  Polymer({
    is: 'get-hash',
    properties: {
      hash: {
        type: String,
        notify: true
      },
      location: {
        type: String,
        value: "london"
      },
      map:Object,
      result:Object
    },
    geoHash: function(lng,lat) {
      return encodeGeoHash(+lng, +lat);
    },
    observers: ['resultChanged(result)','mapChanged(map.latitude,map.longitude)'],
    resultChanged: function(newValue) {
      if (newValue !== null) {
        this.hash = this.geoHash(newValue.latitude, newValue.longitude);
        this.map.setCenter({lat: newValue.latitude, lng: newValue.longitude});
        console.log(this.hash);
      }
    },
    mapChanged: function(latitude, longitude) {
      this.hash = this.geoHash(latitude, longitude);
      console.log(this.hash);
    }
  });
  
})();
    </script>
  </dom-module>
